.qw-top {
  position: fixed;
  top: 0;
  left: $qw-leftbar-width;
  padding: 0;
  min-width: $qw-page-width;
  width: $qw-page-width;
  height: $qw-top-height;
  z-index: 99;

  > .one {
    @include grid-row($behavior: collapse);
    background: $qw-top-one-bg;
    height: $qw-top-one-height;
    max-height: $qw-top-one-height;

    > .breadcrumb {
      background: $qw-top-one-bg;
      min-height: $qw-top-one-height;
      max-height: $qw-top-one-height;
      @media #{$small-only} {@include grid-column($columns: 11, $collapse: true);}
      @media #{$medium-only} {@include grid-column($columns: 8, $collapse: true);}
      @media #{$large-up} {@include grid-column($columns: 9, $collapse: true);}

      > div {
        @media #{$small-up} {padding-left: $qw-content-padding;}
        @media #{$large-up} {padding-left: $qw-content-padding + rem-calc($qw-leftbar-width);}
      }
    }

    > .search {
      min-height: $qw-top-one-height;
      max-height: $qw-top-one-height;
      transition: background 0.15s ease-in-out;

      @media #{$small-only} {@include grid-column($columns: 1, $last-column: true, $collapse: true);}
      @media #{$medium-only} {@include grid-column($columns: 4, $last-column: true, $collapse: true);}
      @media #{$large-up} {@include grid-column($columns: 3, $last-column: true, $collapse: true);}

      > div:not(.close) {
        $ptb: ($qw-top-one-height - $qw-search-height)/2;
        padding: $ptb $qw-content-padding;
      }

      .close {
        position: relative;
        margin-left: -1 * $qw-top-one-height;
        float: left;

        background: $qw-closebtn-large-bg;
        color: $qw-closebtn-fg;

        font-size: 1.2rem;
        width: $qw-top-one-height;
        height: $qw-top-one-height;
        opacity: 0;
        pointer-events: none;

        transition: opacity 0.2s ease-in-out,
                    background 0.2s ease-in-out;

        &:hover {
          background: $qw-closebtn-hover-large-bg;
        }

        &:active {
          background: $qw-closebtn-active-large-bg;
        }

        > div {
          padding: rem-calc(18 28);
        }
      }
    }
  }

  > .two {
    @include grid-row($behavior: collapse);
    background: $qw-top-two-bg;
    height: $qw-top-two-height;
    max-height: $qw-top-two-height;

    > .actions {
      display: table;
      background: $qw-top-two-bg;
      min-height: $qw-top-two-height;

      @media #{$small-only} {
        @include grid-column($columns: 11, $collapse: true);
      }

      @media #{$medium-only} {
        @include grid-column($columns: 8, $collapse: true);
      }

      @media #{$large-up} {
        @include grid-column($columns: 9, $collapse: true);
      }

      > div {
        width: 100%;
        height: $qw-top-two-height;
        transition: width 0.3s ease-in-out;

        @media #{$large-up} {
          $pl: $qw-content-padding + rem-calc($qw-leftbar-width);
          padding-left: $pl;
          width: calc( 100% - #{$pl} );
        }

        display: flex;
        overflow: hidden;

        > div {
          height: $qw-top-two-height;
          overflow: hidden !important;

          &:last-child {
            flex-grow: 2;
            padding-left: 10px;
            padding-top: 10px;
            margin-right: 10px;
          }

          .tabs {
            height: 100%;
          }

          .topicactions {
            top: ($qw-top-two-height - 40px)/2;
            background: $qw-content-bg;
            border-radius: $global-radius;
            height: 40px;
            padding: 0 $qw-content-padding/2;

            > div > div.topbar-edit {
              display: inline-block;
              float: right;
            }

            i {
              font-size: 1.5rem;
              line-height: 1;

              &:last-child {
                float: right;
              }
            }
          }
        }
      }
    }

    > .toggle {
      min-height: $qw-top-two-height;
      max-height: $qw-top-two-height;
      @media #{$small-only} {@include grid-column($columns: 1, $last-column: true, $collapse: true);}
      @media #{$medium-only} {@include grid-column($columns: 4, $last-column: true, $collapse: true);}
      @media #{$large-up} {@include grid-column($columns: 3, $last-column: true, $collapse: true);}
    }
  }

  &.quicksearch {
    background: $qw-quicksearch-bg;

    .search {
      background: white;

      input[name="search"] {
        background: $qw-top-one-bg;
      }
    }
  }

  &.offcanvas {
    &.leftbar {
      @media #{$small-up} {
        transform: translate3d( $qw-leftbar-width-expanded, 0, 0 );
      }

      @media #{$large-up} {
        transform: translate3d( $qw-leftbar-width-expanded - $qw-leftbar-width, 0, 0 );
      }
    }

    &.quicksearch {
      transform: translate3d( -1 * $qw-leftbar-width, 0, 0 );
      background: $qw-quicksearch-bg;

      .one .breadcrumb > div {
        @media #{$medium-only} {
          padding-left: rem-calc($qw-leftbar-width) + $qw-content-padding;
        }
      }

      .one .search {
        @media #{$medium-only} {
          $p: percentage(1/3);
          width: calc( #{$p} + #{$qw-leftbar-width} - #{$qw-content-padding} + 20px);
          margin-right: -1 * rem-calc($qw-leftbar-width);
          margin-left: $qw-content-padding / 3;
          background: $qw-quicksearch-bg;
        }

        @media #{$large-up} {
          $p: percentage(1/4);
          width: calc( #{$p} + 2 * #{$qw-leftbar-width} - #{$qw-content-padding} / 2);
          margin-left: -1 * rem-calc($qw-leftbar-width) + $qw-content-padding / 2;
          margin-right: -1 * $qw-leftbar-width;
          background: $qw-quicksearch-bg;
        }

        .close {
          opacity: 1;
          pointer-events: auto;
          cursor: pointer;
        }
      }
    }

    &.kvpoverlay {
      transform: translate3d( -1 * $qw-leftbar-width, 0, 0 );
      background: $qw-quicksearch-bg;

      .one .breadcrumb > div {
        @media #{$medium-only} {
          padding-left: rem-calc($qw-leftbar-width) + $qw-content-padding;
        }
      }
    }

    &.kvpoverlay, &.quicksearch {
      .two .actions > div {
        @media #{$large-up} {
          $w: $qw-content-padding + rem-calc(2 * $qw-leftbar-width);
          width: calc( 100% - #{$w} );
        }
      }
    }
  }
}
