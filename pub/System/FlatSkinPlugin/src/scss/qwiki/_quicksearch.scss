.qw-quicksearch {
  position: fixed;
  right: 0;
  background: $qw-quicksearch-bg;
  font-family: $body-font-family;
  font-size: 0.8rem;
  z-index: 130;
  transform: translate3d( 100%, 0, 0 );

  @include flex-container($direction:column, $align:stretch);

  @media #{$mobile-only} {
    top: $qw-top-one-height-mobile;
    height: calc(100% - #{$qw-top-one-height-mobile});
  }

  @media #{$small-up} {
    top: $qw-top-one-height;
    height: calc(100% - #{$qw-top-one-height});
  }

  $p: percentage(1/$total-columns);
  @media #{$mobile-up} {width: 100%;}
  @media #{$medium-only} {width: calc( 6 * #{$p} - #{$qw-content-padding}*2 );}
  @media #{$large-only} {width: calc( 4 * #{$p} );}
  @media #{$extended-up} {width: calc( 3 * #{$p} );}

  &.offcanvas {
    &.quicksearch {
      transform: translate3d( 0, 0, 0 );
    }
  }

  &.filter-active {
    border-top: solid 1px $qw-button2-bg-hover-color;

    &:before {
      display: block;
      position: absolute;
      left: #{$qw-content-padding/2 + rem-calc(1)}; top: 1;
      margin-top: -1px;
      height: 1px;
      width: 85px;
      content: ' ';
      background-color: $qw-search-bg;
    }
  }

  .filter-summary {
    height: $qw-search-height;
    padding: 0 rem-calc(20);
    margin-bottom: rem-calc(10);
    line-height: $qw-search-height;

    .filter-reset {
      float: right;
    }
  }

  .filter {
    display: none;
    &.active {
      display: block;
    }
  }
}

.qw-quicksearch-form {
  @include grid-row($behavior: collapse);

  > .form {
    @include flex-container;

    > .toggle {
      > .filter-toggle {
        @extend .qw-prio2-btn;
        height: #{$qw-search-height - 26px};
        margin-right: $qw-content-padding/2;
        visibility: hidden;

        > .filter-hide {
          display: none;
        }
      }
    }

    > .input {
      @include flex($grow: 1);

      > input {
        border: none !important;
        box-shadow: none !important;
        height: $qw-search-height;
        border-radius: $global-radius 0 0 $global-radius;
        width: 66%;
        transition: width 0.3s ease-in-out;
        float: right;
        font-style: italic;

        &:focus {
          width: 100%;
        }
      }
    }

    > .submit {
      @include flex($grow: 0);
      > a {
        @include button(
          $bg: $qw-quicksearch-bg
        );

        display: inline-block;
        width: rem-calc(50);
        padding: 0; margin: 0;
        font-size: 1.8rem;
        color: $qw-topbtn-fg-color;

        border: none !important;
        box-shadow: none !important;
        border-radius: 0 $global-radius $global-radius 0;

        > i {
          display: block;
          height: $qw-search-height;
          &:before { line-height: $qw-search-height; }
        }
      }
    }
  }
}

.qw-top.quicksearch .qw-quicksearch-form {
  > .form .filter-toggle {
    visibility: visible !important;

    &.active {
      height: #{$qw-search-height - 24px + ($qw-top-one-height - $qw-search-height) / 2 - 1px};
      border-bottom: none;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      .filter-show {
        display: none;
      }
      .filter-hide {
        display: block;
      }
    }
  }
}

.qw-quicksearch .results {
  border-top: 1px solid $qw-quicksearch-border-color;
  padding: 0;
  height: 100%;
  overflow: auto;

  @include flex($grow: 1);

  &.searching {
    background-image: url(../assets/quicksearch-spinner.gif);
    background-position: center center;
    background-repeat: no-repeat;
  }

  .qw-total-results {
    margin: 0;
    padding: 0 rem-calc(10);
    line-height: $qw-dochead-label-font-size * 2;
    color: $qw-dochead-label-color;
    font-size: $qw-dochead-label-font-size;
    font-weight: $qw-dochead-label-font-weight;
    text-transform: uppercase;
  }

  .qw-search-result {
    display: block;
    min-height: 50px;
    padding: rem-calc(5);
    margin: rem-calc(5);
    border-top: 1px solid $qw-border-bg;
    border-radius: 3px;

    &:last-child {
      border-bottom: 0px solid $qw-border-bg;
    }

    &:hover,
    &:hover .preview {
      opacity: 1;
      background-color: $qw-quicksearch-result-hover-bg;
      cursor: pointer;
    }

    > .content {
      > .title {
        display: block;
        color: black;
        font-weight: bold;
        font-size: 0.8rem;
        line-height: 1.5rem;
        padding: 0 $qw-content-padding;

        &[data-draft="draft"] {
          border-radius: 3px;
          background-image: url(../assets/pattern_10x10_digstripes_white.png);
          background-color: $warning-color;
        }

        i {
          display: inline-block;
          float: left;
          margin-left: -$qw-content-padding;
          font-size: 1.3rem;
        }
      }

      > .snippet {
        display: block;
        font-size: 0.8rem;

        padding: 5px 0 10px $qw-content-padding;
      }
    }

    &.active {
      background-color: $qw-quicksearch-result-active-bg;
      margin-left: 0;
      padding-left: rem-calc(10);
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;

      .preview {
        opacity: 1;

        border: 0;
        .button {
          background: $qw-button2-bg-color;
          color: $primary-color;
          border-color: $qw-button2-bg-color;
          &:hover { background: $qw-button2-bg-color; }
        }
      }
    }

    .preview {
      float: right;
      transition: opacity 0.15s ease-in-out;
      height: auto;
      opacity: 0;
      font-size: 0.8rem;
      font-style: italic;
      border: solid 5px $qw-button2-bg-color;
      border-top: 0; border-right: 0;
      border-bottom-left-radius: 3px;
      margin-right: rem-calc(-5);
      margin-top: rem-calc(-6);
      padding: 0;

      &:hover {
        background: darken($body-bg, 15%);
      }

      .button {
        border-bottom-right-radius: 0;
        height: 2rem;
        line-height: 2rem;
        padding: 0 $qw-content-padding/2; margin: 0;
      }
    }
  }
}

.qw-search-expert {
  display: block;
  border-top: solid 1px $qw-border-bg;
  padding: rem-calc(10);
  width: calc(100% - rem-calc(20));

  @include flex($grow: 0);

  > a {
    @extend .qw-prio2-btn;
    display: block;
    font-size: 0.8rem;
    font-style: italic;
    margin: 0;
  }
}

#qw-search-pageoverlay {
  $p: percentage( 1 / $total-columns);
  left: 0;
  @media #{$mobile-up} {
    width: 0;
  }
  @media #{$medium-only} {
    width: calc(6 * #{$p} + #{$qw-content-padding}*2);
  }
  @media #{$large-only} {
    width: calc(8 * #{$p});
  }
  @media #{$extended-up} {
    width: calc(9 * #{$p});
  }

  position: fixed;
  background-color: rgba(0, 0, 0, 0.6);
  opacity: 0;
  height: 100%;
  z-index: 120;
  display: none;
  transition: opacity 0.15s ease-in-out;

  @media #{$mobile-only} {top: $qw-top-one-height-mobile;}
  @media #{$small-up} {top: $qw-top-one-height;}

  > .overlay-top {
    position: fixed;
    top: 0;
    left: 0;
    height: $qw-top-one-height;
    background-color: rgba(0, 0, 0, 0.6);
    transition: opacity 0.15s ease-in-out;

    @media #{$medium-only} { 
      width: calc(6 * (#{$p} + #{$qw-content-padding}*2) - #{$qw-search-close-btn-width});
    }
    @media #{$large-only} { 
      width: calc(8 * #{$p} - #{$qw-search-close-btn-width});
    }
    @media #{$extended-up} { 
      width: calc(9 * #{$p} - #{$qw-search-close-btn-width});
    }

    @media #{$mobile-only} {display: none !important;}
    @media #{$small-only} {display: none !important;}
  }

  &.active {
    opacity: 1;
  }
}

#qw-searchpreview {
  position: fixed;
  font-family: $body-font-family;
  $p: percentage( 1 / $total-columns);

  top: $qw-top-one-height;
  @media #{$mobile-only} { top: $qw-top-one-height-mobile; }
  left: 0;
  bottom: 0;
  z-index: 130;
  @media #{$medium-up} {
    left: #{rem-calc($qw-leftbar-width) + $qw-content-padding};
    bottom: $qw-content-padding;
    z-index: 125;
  }
  width: 100%;

  @media #{$medium-only} {
    width: calc(100% - #{rem-calc($qw-leftbar-width) + $qw-content-padding} - 6 * (#{$p} - #{$qw-content-padding}*2) - 5px);
  }
  @media #{$large-only} {
    width: calc(100% - #{rem-calc($qw-leftbar-width) + $qw-content-padding} - 4 * #{$p} - 5px);
  }
  @media #{$extended-up} {
    width: calc(100% - #{rem-calc($qw-leftbar-width) + $qw-content-padding} - 3 * #{$p} - 5px);
  }

  transform: translate3d(200%, 0, 0);
  &.offcanvas.quicksearch { transform: translate3d(100%, 0, 0); }
  transition: transform 0.5s ease-in-out;

  &.active {
    @media #{$medium-up} { 
      transform: translate3d( 0, 0, 0 );
    }
  }

  background: $qw-content-bg;
  border-right: 5px solid $qw-quicksearch-result-active-bg;

  overflow-y: auto;

  > .title {
    border-bottom: solid $qw-quicksearch-border-width $qw-quicksearch-border-color;
    padding: $qw-content-padding/2;
    i { padding-right: $qw-content-padding/2; }
    .heading {
      padding-top: 5px;
      font-size: 1.2rem;
      font-weight: bold;
    }
  }
  > .heading {
    border-bottom: solid $qw-quicksearch-border-width $qw-quicksearch-border-color;
    padding: $qw-content-padding/2 $qw-content-padding/2 0;
  }
  > .content {
    padding: $qw-content-padding/2;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .close {
    float: right;
    line-height: 2rem;

    .qw-close-btn {
      padding: rem-calc(10 0 10 10);
      font-size: 1rem;
    }
  }
}

.qw-preview-title {
  @include button( $padding: $button-tny, $bg: $info-color );
  max-height: 33px;
}

.qw-preview-close-button {
  @include button( $padding: $button-tny, $bg: $secondary-color );
  background: transparent;
  max-height: 33px;
  float: right;

  &:hover {
    color: $body-font-color;
    background: darken($body-bg, 5%);
  }
}

.qw-preview-open-button {
  @include button( $padding: $button-tny, $bg: $secondary-color );
  max-height: 33px;
}

.qw-ico-draft {
  @extend .icon-page-draft;

  font-family:"QWikiSymbol";
  font-weight: normal;
  font-style: normal;
  font-size: 1rem;
}

.qw-ico-approved {
  @extend .icon-page-free;

  font-family:"QWikiSymbol";
  font-weight: normal;
  font-style: normal;
  font-size: 1rem;
}

