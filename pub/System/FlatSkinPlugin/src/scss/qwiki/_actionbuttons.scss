$qw-tab-height-diff: 2 * ($qw-tab-pseudoborder + $qw-tab-deco-border-width) + $qw-tab-outerborder;

.qw-joinedtab {
  float: left;
  border-top: $qw-tab-outerborder solid transparent;
  border-left: $qw-tab-outerborder solid transparent;
  border-right: $qw-tab-outerborder solid transparent;

  @media #{$mobile-only} {height: $qw-top-two-height-mobile;}
  @media #{$small-up} {height: $qw-top-two-height;}

  margin-right: $button-tny - $qw-tab-deco-border-width;
  &:last-child {
      margin-right: $button-tny;
  }

  &.approved:first-child > * {
      margin-left: $button-tny - $qw-tab-deco-border-width;
  }

  & div.active a,
  &:hover div.active:not(:hover) a,
  &.active a {
    color: $qw-tab-text-active-color;
  }
  & div.inactive a,
  &:hover div.inactive:not(:hover) a,
  &.inactive a {
    color: $qw-tab-text-inactive-color;
  }
  & div.active:hover a,
  &.active:hover a {
    color: $qw-tab-text-active-hover-color;
  }
  & div.inactive:hover a,
  &.inactive:hover a {
    color: $qw-tab-text-inactive-hover-color;
  }

  &,
  & > *,
  & > div.pseudoborder > * {
    transition: background $qw-tab-transition-time ease-in-out,
                color $qw-tab-transition-time ease-in-out;
  }

  &.inactive a {
    border-radius: $qw-tab-radius;
  }

  & > * {
  }
  & > div.pseudoborder {
    & > * {
      background-image: none;
      background-color: inherit;
    }
    display: inline-block;
    margin-top: 0px;
    margin-bottom: 0px;
    padding-top: $qw-tab-pseudoborder;
    padding-bottom: $qw-tab-pseudoborder;
  }
  & > * {
    border-width: $qw-tab-deco-border-width 0 $qw-tab-deco-border-width 0;
    border-style: solid;
    border-color: transparent;
  }

  & a {
    text-decoration: none;
  }

  &.active {
    border-color: $qw-content-bg;
    background-color: $qw-content-bg;
  }

  & > a,
  & > div.pseudoborder > a,
  & >.sub-tab > a {
    &:before {
      font-family:"QWikiSymbol";
      font-size: 1.75rem;
      vertical-align: middle;
      transition: margin-right $qw-tab-transition-time linear;
    }
  }


  & > div.pseudoborder > a, & > a {
    display: inline-block;

    @media #{$mobile-only} {
      height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;
      line-height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;
    }

    @media #{$small-up} {
      height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;
      line-height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;
    }

    font-size: rem-calc(13);
    padding-left: $button-tny;
    padding-right: $button-tny;
  }


  &.approved {
    & > div.pseudoborder > a, & > a {
      &:before {
        @extend .icon-page-free;
      }
    }

    &.active {
      border-color: $qw-content-bg;

      &,
      & > * {
        background: $qw-tab-approved-active-color;
      }
    }

    &.inactive {
      & > div.pseudoborder > a,
      & > a {
          background: $qw-tab-approved-inactive-color;
      }
    }
  }

  &.unapproved {
    > div.pseudoborder > a:before, > a:before {
      @extend .icon-page-draft;
    }

    & > * {
      background-image: none;
    }

    &.active {
      & > div.pseudoborder {
          background-image: $qw-stripes;
          background-color: $qw-tab-unapproved-active-color;
      }

      & > * {
        background-color: $qw-edit-color;
      }
    }
    &.inactive {
      & > div.pseudoborder > a,
      & > a {
          background: $qw-tab-approved-inactive-color;
      }
    }
  }

  & > .sub-tab > div.pseudoborder {
      background-color: transparent;

      & a {
          background-color: $qw-tab-subtab-color;
      }
  }
  &.active > .sub-tab > div.pseudoborder {
      &,
      & a {
          background-color: $qw-tab-subtab-color;
      }
  }
  & > .sub-tab.inactive:hover > div.pseudoborder {
      & a {
          background-color: $qw-tab-subtab-inactive-hover-color;
      }
  }
  &.active > .sub-tab:hover > div.pseudoborder,
  & > .sub-tab.active:hover > div.pseudoborder {
      &,
      & a {
          background-color: $qw-tab-subtab-active-hover-color;
      }
  }


  > .sub-tab {
    float: right;
    background-color: transparent;
    border: none;
    margin-left: $qw-tab-deco-border-width;
    padding-top: 0px;
    padding-bottom: 0px;
    margin-top: 0px;
    margin-bottom: 0px;

    & > div.pseudoborder {
        padding-top: $qw-tab-pseudoborder;
        border-top: $qw-tab-deco-border-width solid transparent;
        padding-bottom: $qw-tab-pseudoborder;
        border-bottom: $qw-tab-deco-border-width solid transparent;
    }


    @media #{$mobile-only} {height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;}
    @media #{$small-up} {height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;}

    > div.pseudoborder > a,
    > a {
      display: inline-block;
      border: none;
      font-size: rem-calc(13);
      font-weight: normal;
      background-color: $qw-tab-subtab-color;
      background-image: none;
      border-color: $qw-tab-subtab-color;
      padding-left: $button-tny;
      padding-right: $button-tny;

      @media #{$mobile-only} {
        height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;
        line-height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;
      }

      @media #{$small-up} {
        height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;
        line-height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;
      }

      &:not(:hover) {
        &:before {
          margin-right: 0;
        }

        .expander {
          max-width: 0;
        }
      }

      .expander {
        width: auto;
        max-width: rem-calc(500);
        overflow-x: hidden;
        float: right;
        transition: max-width $qw-tab-transition-time ease-in-out;
        white-space: nowrap;

        @media #{$mobile-only} {
          height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;
          line-height: rem-calc($qw-top-two-height-mobile) - $qw-tab-height-diff;
        }

        @media #{$small-up} {
          height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;
          line-height: rem-calc($qw-top-two-height) - $qw-tab-height-diff;
        }
      }
    }

    &.edit > a:before {
      @extend .icon-edit;
    }
  }
}

// printing, further topic actions, language selector, etc
.qw-action-button {
  @include button( $padding: $button-tny, $bg: $qw-actionbtn-bg, $radius: $global-radius );
  margin: 0;
  padding: rem-calc(3 7 4 7);
  font-size: 1rem;
  line-height: 1rem;
  color: $qw-actionbtn-color;

  > * {
    max-width: 34px;
    max-height: 34px;
  }

  &:hover {
    background: $qw-actionbtn-hover-bg;
    color: $qw-actionbtn-hover-color;
  }

  &:active {
    background: $qw-actionbtn-active-bg;
    color: $qw-actionbtn-hover-color;
  }

  &.active {
    background: $qw-actionbtn-active-bg;
    color: $qw-actionbtn-hover-color;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: $global-radius;
      border-bottom-left-radius: $global-radius;
    }

    &:last-child {
      border-top-right-radius: $global-radius;
      border-bottom-right-radius: $global-radius;
    }

    &:hover {
      background: lighten($qw-actionbtn-active-bg, 10%);
    }
  }

  > i:before {
    width: 20px !important;
  }
}
