%TMPL:DEF{"document"}%
%TMPL:P{"doctype"}%
%TMPL:P{"htmlstart"}%
%TMPL:P{"head"}%
%TMPL:P{"body"}%
%TMPL:P{"htmlend"}%
%TMPL:END%

%{
  Prints the entire document.
  (wrapped in comments to prevent foswiki's theme engine to produce unwanted paragraphs)
}%
%{}%%TMPL:P{"document"}%%{}%

%{ HTML5 doctype }%
%TMPL:DEF{"doctype"}%<!DOCTYPE html>%TMPL:END%
%TMPL:DEF{"htmlstart"}%<html lang="%LANG%">%TMPL:END%
%TMPL:DEF{"htmlend"}%</html>%TMPL:END%

%TMPL:DEF{"head"}%%{
}%<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="%TOPIC%">
  <meta name="TEXT_NUM_TOPICS" content="%MAKETEXT{"Number of topics:"}%">
  <meta name="TEXT_MODIFY_SEARCH" content="%MAKETEXT{"Modify search"}%">
  <meta name="robots" content="noindex">
  <link rel="icon" href="%FAVICON%" type="image/x-icon" />
  <link rel="shortcut icon" href="%FAVICON%" type="image/x-icon" />
  <link rel="alternate" href="%SCRIPTURL{edit}%/%BASEWEB%/%BASETOPIC%?t=%GMTIME{"$epoch"}%" type="application/x-wiki" title="edit %BASETOPIC%" />
  <link rel="stylesheet" href="/pub/System/FlatSkinPlugin/css/flat.css">
  %TMPL:P{"script"}%
  %TMPL:P{"windowtitle"}%
  %TMPL:P{"defaultstyle"}%
  <base href="%SCRIPTURL{%SCRIPTNAME%}%/%WEB%/%TOPIC%" />
</head>%TMPL:END%

%{
  Default page layout containing placeholders for
    * both topbars (primary/secondary)
    * all off-screen menus (offcanvas)
    * the actual topic content
}%

%TMPL:DEF{"body"}%%{
}%<body class="%TMPL:P{"ma-ctx"}%">
  %TMPL:P{"topbar:primary"}%
  %TMPL:P{"offcanvas"}%
  <div class="canvas">%{
  }%%TMPL:P{"topbar:secondary"}%%{
  }%<div class="container-fluid">
      <div class="row">
        <div class="%TMPL:P{"ma-col-layout-left"}%">
          <div id="ma-cke-top" data-spy="affix" data-offset-top="0" data-offset-bottom="0"></div>
          <div class="panel panel-default">
            <div class="panel-body">
              <div class="ma-content">%TMPL:P{"content"}%</div>
            </div>
          </div>
        </div>
        <div class="%TMPL:P{"ma-col-layout-right"}%">
          <ul id="foobar" class="list-group" data-spy="affix" data-offset-top="0" data-offset-bottom="0">%META{"attachments"}%</ul>
        </div>
      </div>
    </div>
  </div>
</body>%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%



%{
  Primary topbar definition ("the top topbar").
  Auto-collapses @screen-sm, divided into three parts:
    * non-customizable link area
    * content area defined by placeholder 'topbar:primary:content'
      * VIEW: shows the breadcrumb navigation
      * EDIT: shows document information
    * action area defined by placeholder 'topbar:primary:actions'
      * VIEW: shows the search bar
      * EDIT: shows save/cancel buttons
}%

%TMPL:DEF{"topbar:primary"}%%{
}%<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header col-lg-1">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-collapse">
        <span class="sr-only">%MAKETEXT{"Toggle navigation"}%</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="#" class="navbar-brand" data-toggle="offcanvas" data-autohide="false" data-target=".navmenu-fixed-left" data-canvas=".canvas">
        <i class="fa fa-navicon"></i>&nbsp;%MAKETEXT{"Menu"}%&nbsp;&nbsp;<span class="badge pull-right">42</span>
      </a>
    </div>
    <div class="collapse navbar-collapse" id="nav-collapse">%{
    }%%TMPL:P{"topbar:primary:content"}%%{
    }%%TMPL:P{"topbar:primary:actions"}% %{
    }%</div>
  </div>
</nav>%TMPL:END%

%TMPL:DEF{"topbar:primary:content"}%<ul class="nav navbar-nav">%TMPL:P{"breadcrumb"}%</ul>%TMPL:END%

%TMPL:DEF{"topbar:primary:actions"}%%{
}%<form class="navbar-form navbar-right" role="search">
  <div class="form-group">
    <input type="text" class="form-control input-sm" placeholder="Search">
  </div>
  <button type="submit" class="btn btn-link"><i class="fa fa-search"></i></button>
</form>%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%



%{
  The secondary topbar is used to display the topic action buttons as well as
  a kind of tab navigation to toggle view/edit mode.

  Divided into three parts
    * left side: tab navigation
    * right side: topic action buttons
    * Non-customizable CKE placeholder
}%
%TMPL:DEF{"topbar:secondary"}%%{
}%<nav class="navbar navbar-default navbar-secondary navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="row">
      <div class="%TMPL:P{"ma-col-layout-left"}% ma-padding-top-large">
        <div class="btn-group pull-left">%TMPL:P{"topbar:secondary:tabs"}%</div>
        <div class="btn-group pull-right">%TMPL:P{"topbar:secondary:buttons"}%</div>
      </div>
      <div class="%TMPL:P{"ma-col-layout-right"}% ma-padding-top-large">
        <div class="btn-group pull-left">
          <button type="button" class="btn btn-default btn-borderless btn-square btn-transparent">
            <i class="fa fa-refresh"></i><span class="ma-margin-left hidden-md">%MAKETEXT{"CIP"}%</span>
          </button>
          <button type="button" class="btn btn-default btn-muted btn-borderless btn-square">
            <i class="fa fa-download"></i><span class="ma-margin-left hidden-md">%MAKETEXT{"Attachments"}%</span>
          </button>
          <button type="button" class="btn btn-default btn-borderless btn-square btn-transparent">
            <i class="fa fa-comments-o"></i><span class="ma-margin-left hidden-md">%MAKETEXT{"Comments"}%</span>
          </button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="%TMPL:P{"ma-col-layout-left"}%">
        <div class="navbar-secondary-border %TMPL:P{"ma-ctx"}%"></div>
      </div>
      <div class="%TMPL:P{"ma-col-layout-right"}%">
        <div class="navbar-secondary-border"></div>
      </div>
    </div>
  </div>
</nav>%TMPL:END%

%{
  This template contains an additional placeholder 'topbar:secondary:buttons:lang'
  to include a language specific menu.

  By default there are three buttons:
    * bookmark
    * print document
    * further topic options
}%
%TMPL:DEF{"topbar:secondary:buttons"}%%{
}%<button type="button" class="btn btn-default btn-borderless btn-square btn-transparent"><i class="fa fa-bookmark-o"></i></button>
<button type="button" class="btn btn-default btn-borderless btn-square btn-transparent"><i class="fa fa-print"></i></button>
<button type="button" class="btn btn-default btn-borderless btn-square btn-transparent"><i class="fa fa-cog"></i></button>%{
}%%TMPL:P{"topbar:secondary:buttons:lang"}%%TMPL:END%

%{ Defines a dropdown button to switch between available topic languages }%
%TMPL:DEF{"topbar:secondary:buttons:lang"}%%{
}%<button type="button" class="btn btn-default btn-borderless btn-square btn-transparent dropdown-toggle %TMPL:P{"ma-ctx:edit-hidden"}%" data-toggle="dropdown">%MAKETEXT{"Language"}%&nbsp;<span class="caret"></span></button>
<ul class="dropdown-menu" role="menu">
  <li><a href="#">lang 1</a></li>
  <li><a href="#">lang 2</a></li>
</ul>%TMPL:END%

%{ Tab definitions (toggle view/edit mode(s))}%
%TMPL:DEF{"topbar:secondary:tabs"}%
<a href='%SCRIPTURLPATH{"view"}%/%WEB%/%TOPIC%' role="button" class='%TMPL:P{"ma-ctx:topbar:secondary:brand:view"}%'>%TMPL:P{"topbar:secondary:tabs:text-left"}%</a>
<a href='%SCRIPTURLPATH{"edit"}%/%WEB%/%TOPIC%' role="button" class='%TMPL:P{"ma-ctx:topbar:secondary:brand:edit"}%'>%TMPL:P{"topbar:secondary:tabs:text-right"}%</a>
%TMPL:END%

%{ Tab title text }%
%TMPL:DEF{"topbar:secondary:tabs:text-left"}%<i class="fa fa-check-square-o ma-margin-right"></i>%MAKETEXT{"Version"}%%REVINFO{"&nbsp;$rev"}%%TMPL:END%
%TMPL:DEF{"topbar:secondary:tabs:text-right"}%<i class="fa fa-edit ma-margin-right"></i>%MAKETEXT{"Edit draft"}%%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%



%{
  Breadcrumbs navigation
  The macro MA_WEBLIST is part of this plugin.
}%
%TMPL:DEF{"breadcrumb"}%%{
}%<ul class="nav navbar-nav ma-breadcrumb ">%{
  }%%TMPL:P{"breadcrumb:home"}%%{
  }%%TMPL:P{"breadcrumb:parentwebs"}%%{
  }%%TMPL:P{"breadcrumb:parenttopics"}%%{
  }%%TMPL:P{"breadcrumb:topic"}%%{
}%</ul>%TMPL:END%
%TMPL:DEF{"breadcrumb:home"}%<li>[[%USERSWEB%.%HOMETOPIC%][<i class="fa fa-sitemap fa-lg"></i>]]</li>%TMPL:END%
%TMPL:DEF{"breadcrumb:parentwebs"}%%MA_WEBLIST%%TMPL:END%
%TMPL:DEF{"breadcrumb:parenttopics"}%%META{"parent" nowebhome="on" prefix="<li>" separator="" suffix="</li>"}%%TMPL:END%
%TMPL:DEF{"breadcrumb:topic"}%%IF{"'%TOPIC%' != 'WebHome'" then="<li>[[%TOPIC%][%TOPIC%]]</li>" else=" "}%%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%



%{
  Offcanvas definitions (a.k.a revealing sidebars)

  The offcanvas template collects all of its subdefinitions and decides whether to
  include a suitable navmenu container or not.
}%
%TMPL:DEF{"offcanvas"}%%{
}%%IF{"$'TMPL:P{offcanvas:leftbar}'" then="<div class='navmenu navmenu-default navmenu-fixed-left'>$percntTMPL:P{\"offcanvas:leftbar\"}$percnt</div>" else=""}%%{
}%%IF{"$'TMPL:P{offcanvas:rightbar}'" then="<div class='navmenu navmenu-default navmenu-fixed-right'>$percntTMPL:P{\"offcanvas:rightbar\"}$percnt</div>" else=""}%%{
}%%IF{"$'TMPL:P{offcanvas:search}'" then="<div class='navmenu navmenu-default navmenu-fixed-right'>$percntTMPL:P{\"offcanvas:search\"}$percnt</div>" else=""}%%{
}%%TMPL:END%

%{ Left sidebar entries }%
%TMPL:DEF{"offcanvas:leftbar"}%%{
}%<a class="navmenu-brand" href="#">Brand</a>
  <ul class="nav nav-pills nav-stacked">
    <li><a href="#"><i class="fa fa-home"></i> Dashboard</a></li>
  </ul>
  <ul class="nav nav-pills nav-stacked ma-padding-top-large">
    <li><a href="#"><i class="fa fa-tasks"></i> Aufgaben <span class="badge pull-right">7</span></a></li>
    <li><a href="#"><i class="fa fa-calendar-o"></i> Kalender <span class="badge pull-right">12</span></a></li>
    <li><a href="#"><i class="fa fa-globe"></i> Aktivitäten <span class="badge pull-right">23</span></a></li>
    <li><a href="#"><i class="fa fa-bookmark"></i> Merkliste</a></li>
  </ul>
  <ul class="nav nav-pills nav-stacked ma-padding-top-large">
    <li class="active"><a href="#"><i class="fa fa-sitemap"></i> Prozesse <span class="pull-right"><i class="fa fa-cog"></i></span></a></li>
    <li><a href="#"><i class="fa fa-inbox"></i> Projekte <span class="pull-right"><i class="fa fa-cog"></i></span></a></li>
  </ul>%TMPL:END%

%{ placeholder for future use }%
%TMPL:DEF{"offcanvas:rightbar"}%%TMPL:END%

%{ placeholder for future use }%
%TMPL:DEF{"offcanvas:search"}%%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%



%{
  Helper(s)
  Note: all Modell Aachen specific templates, classes, whatever, are prefixed by 'ma-'.
}%

%{ Grid column definition used to render/display topic contents. }%
%TMPL:DEF{"ma-col-layout-left"}%col-sm-12 col-md-9 col-lg-offset-1 col-lg-8%TMPL:END%
%TMPL:DEF{"ma-col-layout-right"}%hidden-xs hidden-sm col-md-3 col-lg-3%TMPL:END%

%{
  CSS class(es) to define the current page context.
  This/These class(es) are appended to the BODY tag.

  Defaults to 'ma-ctx-view'.
}%
%TMPL:DEF{"ma-ctx"}%ma-ctx-view%TMPL:END%

%{
  Template to hide content if the current context is NOT 'ma-ctx-view'.
  Usage:
    <element class='some more classes %TMPL:P{"ma-ctx-view-visible"}'></element>
}%
%TMPL:DEF{"ma-ctx:view-visible"}%%IF{"$'TMPL:P{ma-ctx}'!='ma-ctx-view'" then="hidden" else=""}%%TMPL:END%

%{ Negated 'ma-ctx:view-visible' }%
%TMPL:DEF{"ma-ctx:view-hidden"}%%IF{"$'TMPL:P{ma-ctx}'='ma-ctx-view'" then="hidden" else=""}%%TMPL:END%

%{ Same as above but checks for context EDIT. }%
%TMPL:DEF{"ma-ctx:edit-visible"}%%IF{"$'TMPL:P{ma-ctx}'!='ma-ctx-edit'" then="hidden" else=""}%%TMPL:END%
%TMPL:DEF{"ma-ctx:edit-hidden"}%%IF{"$'TMPL:P{ma-ctx}'='ma-ctx-edit'" then="hidden" else=""}%%TMPL:END%

%{ Sets the button/tab appearance based on the current page context. }%
%TMPL:DEF{"ma-ctx:topbar:secondary:brand:view"}%btn btn-borderless btn-square ma-margin-right-small %IF{"$'TMPL:P{ma-ctx}'='ma-ctx-view'" then="btn-success" else="btn-default btn-transparent"}%%TMPL:END%%TMPL:END%
%TMPL:DEF{"ma-ctx:topbar:secondary:brand:edit"}%btn btn-borderless btn-square %IF{"$'TMPL:P{ma-ctx}'='ma-ctx-view'" then="btn-default btn-transparent" else="btn-danger"}%%TMPL:END%%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%



%{
  Foswiki overrides.
}%
%TMPL:DEF{"topicaction"}%%TMPL:P{"topicactionbuttons"}%%TMPL:END%
%TMPL:DEF{"topicinfo"}%%TMPL:END%
%{ ---------------------------------------------------------------------------}%
%{ ---------------------------------------------------------------------------}%
